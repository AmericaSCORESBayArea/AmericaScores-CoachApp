# This is a basic workflow that is manually triggered

name: Manual workflow

# Controls when the action will run. Workflow runs when manually triggered using the UI
# or API.
on:
  workflow_dispatch:
    # Inputs the workflow accepts.
    inputs:
      name:
        # Friendly description to be shown in the UI instead of 'name'
        description: 'Build pipeline for AmericaScores react-native mobile application'
        # Default value if no value is explicitly provided
        # default: ''
        # Input has to be provided for the workflow to run
        required: true

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "greet"
  build_ios:
    # The type of runner that the job will run on
    runs-on: macos-latest or macos-10.15
    
    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    - name: Clean temp directory
      #run: rm -rf *
      #working-directory: ./temp
    # Runs a single command using the runners shell
    - name: Start
      run: echo "${{ github.event.inputs.name } ---- Building AmericaScores iOS app!!}"
      run: brew install
      run: xcode-select --install
      run: npm install
      run: npm install -g expo-cli and npm install -g react-native-cli
#     - name: build and test
#       run: |
#         npm run build --if-present
#         npm test
      run: sudo gem install cocoapods
      run: brew install git
      run: git checkout 
      run: | 
        cd AmericaScores-attendanceApp 
        npm install
      
    - name: Upload a Build Artifact
        uses: actions/upload-artifact@v2.2.4
        with:
          # Artifact name
          name: # optional, default is artifact
          # A file, directory or wildcard pattern that describes what to upload
          path: 
          # The desired behavior if no files are found using the provided path.
      Available Options:
        warn: Output a warning but do not fail the action
        error: Fail the action with an error message
        ignore: Do not output any warnings or errors, the action does not fail

          if-no-files-found: # optional, default is warn
          # Duration after which artifact will expire in days. 0 means using default retention.
          Minimum 1 day. Maximum 90 days unless changed from the repository settings page.

          retention-days: # optional
          

# build the Android application

jobs:
  # This workflow contains a single job called "greet"
  build_android:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest, windows-lates

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    # Runs a single command using the runners shell
    - name: Go
      run: echo "Building AmericaScores Android app!! ${{ github.event.inputs.name }}"
    - name: Install Dependencies
      run: npm install
    - name: Install Dependencies
      run: 
    - name: Upload a Build Artifact
        uses: actions/upload-artifact@v2.2.4
        with:
          # Artifact name
          name: # optional, default is artifact
          # A file, directory or wildcard pattern that describes what to upload
          path: 
          # The desired behavior if no files are found using the provided path.
      Available Options:
        warn: Output a warning but do not fail the action
        error: Fail the action with an error message
        ignore: Do not output any warnings or errors, the action does not fail

          if-no-files-found: # optional, default is warn
          # Duration after which artifact will expire in days. 0 means using default retention.
          Minimum 1 day. Maximum 90 days unless changed from the repository settings page.

          retention-days: # optional
      
